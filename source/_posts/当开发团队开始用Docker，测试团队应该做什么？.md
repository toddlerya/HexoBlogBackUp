---
title: "å½“å¼€å‘å›¢é˜Ÿå¼€å§‹ç”¨Dockerï¼Œæµ‹è¯•å›¢é˜Ÿåº”è¯¥åšä»€ä¹ˆï¼Ÿ"
date: 2019-03-01T20:29:16+08:00
tags: [è½¯ä»¶æµ‹è¯•, æµ‹è¯•å¼€å‘, docker]
categories:
 - ç¬”è®°
typora-root-url: ..
typora-copy-images-to: ../images
---

åœ¨ä¹‹å‰çš„[ã€ŠHello Dockerã€‹]({{< relref "Hello-Docker.md" >}})ä¸­ï¼Œç®€å•ä»‹ç»è¿‡Dockerï¼Œä½†ä»…é™äºåœ¨æµ‹è¯•å¼€å‘å›¢é˜Ÿå†…éƒ¨ä½¿ç”¨ï¼Œæˆ–è€…è¯´æ›´å¤šçš„æ˜¯æˆ‘ä¸ªäººåœ¨ä½¿ç”¨Orzï¼Œç­‰äº†å¥½ä¹…ç»ˆäºå…¬å¸çš„ç ”å‘å›¢é˜Ÿå¼€å§‹æ­£å¼ä½¿ç”¨Dockeräº†ã€‚è¿™æ¬¡æ¥è¥¿å®‰åˆ†å…¬å¸å­¦ä¹ ä¸‹å…¬å¸åŸºäºDockerå’ŒK8Så¼€å‘çš„å®¹å™¨äº‘å¹³å°ï¼Œæ·±å…¥äº†è§£äº†ä¸‹Dockerçš„åº•å±‚åŸç†ï¼Œç®€å•å­¦ä¹ äº†ä¸‹K8Sçš„åŸºæœ¬æ¦‚å¿µå’Œæ“ä½œï¼Œæ„Ÿè§‰å¯¹äºç ”å‘å›¢é˜Ÿæ¥è¯´ï¼Œå®¹å™¨åŒ–çš„è¿ç§»è¿˜æ˜¯æœ‰ä¸€å®šæˆæœ¬çš„ã€‚

# Dockerå¸¦æ¥äº†ä»€ä¹ˆï¼Ÿæ”¹å˜äº†ä»€ä¹ˆï¼Ÿ

## ä¸€ã€ä¼ ç»Ÿè½¯ä»¶å¼€å‘æµç¨‹æœ‰å‡ å¤§ç—›ç‚¹ï¼š

1. å¼€å‘ã€æµ‹è¯•ã€å‘å¸ƒç¯å¢ƒä¸ç»Ÿä¸€

2. é…ç½®æµ‹è¯•ç¯å¢ƒè¿‡ç¨‹å†—é•¿åˆå¤æ‚

3. è‡ªåŠ¨åŒ–æµ‹è¯•ç¯å¢ƒä¸ç¨³å®šï¼Œå®¹æ˜“å—åˆ°æ±¡æŸ“ï¼Œéš”ç¦»ä¸è¶³

4. æ— æ³•å‡†ç¡®è·å¾—å®¢æˆ·çš„è½¯ä»¶ç¯å¢ƒ

5. å¼€å‘å›¢é˜Ÿæ— æ³•å¤ç°æµ‹è¯•å›¢é˜ŸæŠ¥å‡ºçš„è½¯ä»¶ç¼ºé™·ï¼Œå¯¼è‡´ä¸¤ä¸ªå›¢é˜Ÿå‡ºç°ç›¸äº’æ¨è¯¿çš„ç°è±¡

## äºŒã€å½“å‰æµ‹è¯•æŠ€æœ¯é¢ä¸´çš„å‡ å¤§æŒ‘æˆ˜ï¼š

1. é…ç½®ä¸€è‡´çš„æµ‹è¯•ç¯å¢ƒ
2. å¿«é€Ÿéƒ¨ç½²è½¯ä»¶
3. å¹¶è¡Œæ‰§è¡Œæµ‹è¯•ï¼Œåœ¨å¹¶è¡Œçš„åŒæ—¶è¿˜è¦ä¿è¯æµ‹è¯•ä»»åŠ¡å„è‡ªçš„ç¯å¢ƒä¸è¢«æ±¡æŸ“
4. æˆåŠŸçš„å¤ç°è½¯ä»¶ç¼ºé™·
5. åˆ›å»ºå¹²å‡€çš„å¯ä¿¡çš„æµ‹è¯•ç¯å¢ƒ
6. å¿«é€Ÿéƒ¨ç½²å¤šä¸ªæµ‹è¯•ä¸»æœº
7. å¿«é€Ÿå¯¼å…¥æµ‹è¯•æ•°æ®
8. å¿«é€Ÿæ¸…ç†æµ‹è¯•ç¯å¢ƒ
9. å¿«é€Ÿä¿ç•™ã€å¤åˆ¶ã€æ¢å¤æµ‹è¯•ç¯å¢ƒ
10. æ­£ç¡®é…ç½®æµ‹è¯•å·¥å…·ã€‚å¿«é€Ÿå°†æµ‹è¯•ç¯å¢ƒåœ¨ä¸åŒæ“ä½œç³»ç»Ÿï¼ˆç±»Unixï¼‰

## ä¸‰ã€Dockerå¯¹æµ‹è¯•æŠ€æœ¯çš„é©å‘½æ€§å½±å“

è½¯ä»¶å¼€å‘äº¤ä»˜é€Ÿåº¦ä¸Šä¸å»ï¼Œå¾ˆå¤§ä¸€ä¸ªé—®é¢˜æ˜¯è½¯ä»¶è¿è¡Œç¯å¢ƒè¿™ä¸ªç¯èŠ‚å­˜åœ¨ç“¶é¢ˆï¼ŒDockerè§£å†³äº†è¿™ä¸ªç“¶é¢ˆï¼Œä¿ƒè¿›äº†è½¯ä»¶å¼€å‘çš„DevOpsæ¨¡å¼æ¨å¹¿ï¼Œè¿™å¯¹æ‰€æœ‰çš„è½¯ä»¶è¡Œä¸šä»ä¸šè€…éƒ½æ˜¯å·¨å¤§åˆ©å¥½ã€‚

è½¯ä»¶æµ‹è¯•çš„å‡ ä¸ªé‡è¦æ–¹é¢ï¼šæµ‹è¯•ç­–ç•¥ã€æµ‹è¯•è®¾è®¡ã€æµ‹è¯•æ–¹æ³•ã€æµ‹è¯•æ•°æ®ã€æµ‹è¯•ç¯å¢ƒï¼Œå‰ä¸‰ä¸ªæ˜¯æ–¹æ³•è®ºæ€æƒ³å±‚é¢çš„ï¼Œåä¸¤ä¸ªæ˜¯éœ€è¦æŠ€æœ¯çªç ´çš„ã€‚æµ‹è¯•æ•°æ®å› å…·ä½“ç»†åˆ†è¡Œä¸šä¸åŒï¼Œå„æœ‰å„çš„ç—›ç‚¹ä¹Ÿå„æœ‰å„çš„è§£å†³æ–¹æ¡ˆï¼Œä½†æ˜¯å¯¹äºæµ‹è¯•ç¯å¢ƒæ¥è¯´ï¼ŒDockeræ˜¯ä¸ªè¿‘ä¹æ¥è¿‘â€œé“¶å¼¹â€çš„æŠ€æœ¯è§£å†³æ–¹æ¡ˆã€‚

### é€šè¿‡Dockerçš„è½¯ä»¶ç¯å¢ƒå¿«é€Ÿéƒ¨ç½²èƒ½åŠ›ï¼Œä¿ƒè¿›äº†æµ‹è¯•æ—¶é—´çš„å†åˆ†é…

ä¸€ä¸ªå°å°çš„Dockerfileæ˜ç¡®å£°æ˜äº†è½¯ä»¶éƒ¨ç½²çš„æ‰€æœ‰ç»†èŠ‚å’Œæµç¨‹ï¼Œä»æ­¤å¿˜è®°å†—é•¿çš„å®‰è£…éƒ¨ç½²æ–‡æ¡£å§ï¼æ— è®ºæ˜¯ä»ç ”å‘è‡ªæµ‹ã€åŠŸèƒ½æµ‹è¯•ã€é›†æˆæµ‹è¯•ç­‰å“ªä¸ªç¯èŠ‚æ¥è®²ï¼Œæµ‹è¯•ç¯å¢ƒçš„éƒ¨ç½²æ—¶é—´æˆå€ç¼©çŸ­ï¼Œèƒ½ç»™å·¥ç¨‹å¸ˆæ›´å¤šçš„æ—¶é—´åšæ›´å¤šæœ‰æ„ä¹‰çš„äº‹æƒ…ï¼Œå¼€å‘å·¥ç¨‹å¸ˆå¯ä»¥æœ‰æ›´å¤šæ—¶é—´å®Œå–„ä¼˜åŒ–è®¾è®¡ï¼Œä¿®å¤ç¼ºé™·ï¼Œæµ‹è¯•å·¥ç¨‹å¸ˆå¯ä»¥æœ‰è·Ÿå¤šæ—¶é—´æ‹“å®½æµ‹è¯•çš„å¹¿åº¦å’Œæé«˜æµ‹è¯•çš„æ·±åº¦ï¼Œè¿ç»´å·¥ç¨‹å¸ˆæœ‰æ›´å¤šçš„æ—¶é—´ä¸“æ³¨äºæ”¹è¿›è½¯ä»¶ç›‘æ§åˆ†æç³»ç»Ÿï¼Œè¿™å’Œæœ‰æ•ˆçš„è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä»·å€¼å¯ä»¥ç›¸æå¹¶è®ºã€‚

### é€šè¿‡Dockerçš„è½¯ä»¶ç¯å¢ƒä¸€è‡´æ€§èƒ½åŠ›ï¼Œæœ‰æ•ˆé™ä½äº†å¶ç„¶å¤æ‚åº¦

Dockerçš„é•œåƒå‘å¸ƒï¼Œå®¹å™¨ç¼–æ’è¿è¡Œç­‰è®¾è®¡å®ç°ï¼Œä¿è¯äº†å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€ç”Ÿäº§å‘å¸ƒç¯å¢ƒä»¥åŠä¸åŒæ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆçš„é«˜åº¦ä¸€è‡´å¯ä¿¡ï¼Œå‡ ä¹é¿å…äº†æµ‹è¯•å›¢é˜Ÿå‘ç°çš„ç¼ºé™·åœ¨å¼€å‘ç¯å¢ƒæ— æ³•å¤ç°ã€çº¿ä¸Šç”Ÿäº§ç¯å¢ƒçš„ç¼ºé™·åœ¨çº¿ä¸‹æ— æ³•å¤ç°ä¸”ä¸ä¾¿çº¿ä¸Šè°ƒè¯•ç­‰é—®é¢˜å¸¦æ¥çš„ä¸€äº›åˆ—äººåŠ›æˆæœ¬ã€æ—¶é—´æˆæœ¬ã€å¿ƒæ™ºæˆæœ¬çš„æ— è°“æ¶ˆè€—ã€‚

### é€šè¿‡Dockerçš„ç¯å¢ƒéš”ç¦»ç®¡ç†èƒ½åŠ›ï¼Œæé«˜äº†æµ‹è¯•èµ„æºçš„è‡ªç”±åº¦

ä»¥å¾€è™½ç„¶æœ‰å„ç§è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œå¯ä»¥ä¸€å°æœåŠ¡å™¨è™šæ‹ŸåŒ–ä¸ºå¤šå°è™šæ‹Ÿæœºï¼Œå¯ä»¥å¯¹è™šæ‹Ÿæœºè¿›è¡Œå¿«ç…§ï¼Œéšæ—¶æ¢å¤è½¯ä»¶ç¯å¢ƒï¼Œä½†æ˜¯ç»ˆç©¶å¤ªç¬¨é‡ï¼Œèµ„æºæŸè€—å¤ªé«˜ï¼Œåˆ©ç”¨ç‡å¤ªä½ï¼Œæ— æ³•å®ç°æµ‹è¯•èµ„æºè‡ªç”±ã€‚ç°åœ¨æœ‰äº†Dockerçš„èµ„æºéš”ç¦»ç®¡ç†èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§æµ‹è¯•éœ€æ±‚ï¼Œå¯åŠ¨å¤šä¸ªä¸åŒç‰ˆæœ¬çš„æœåŠ¡ï¼Œéšæ—¶åˆ›å»ºï¼Œéšæ—¶é”€æ¯ï¼›æˆ‘ä»¬ç”šè‡³å¯ä»¥åœ¨ä¸€å°æœåŠ¡å™¨ç»™æ¯ä¸ªæµ‹è¯•äººå‘˜å¯åŠ¨ä¸€å¥—ç‹¬ç«‹çš„æµ‹è¯•ç¯å¢ƒï¼Œå¤§å®¶å¹¶è¡Œæµ‹è¯•ï¼Œäº’ä¸å¹²æ‰°ï¼Œé¿å…äº†äº’ç›¸è¸©è¸ã€‚åŒæ—¶è¿™ç§ç¯å¢ƒèµ„æºçš„è‡ªç”±åº¦ï¼Œå¯¹äºè‡ªåŠ¨åŒ–æµ‹è¯•çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯æœ‰å¾ˆå¤§å¸®åŠ©çš„ï¼Œå¤§å¤§æé«˜äº†è‡ªåŠ¨åŒ–æµ‹è¯•çš„æˆåŠŸç‡ï¼Œè¿›è€Œæé«˜è‡ªåŠ¨åŒ–æµ‹è¯•çš„ROIã€‚

# æµ‹è¯•å›¢é˜Ÿå¦‚ä½•é¡ºåŠ¿è€Œä¸ºï¼Ÿ

ä¸Šä¸€å°èŠ‚æ€»ç»“çš„ä¸‰ç‚¹é©å‘½æ€§å½±å“ï¼Œå¯¹äºæ•´ä¸ªå¼€å‘æµç¨‹æ¥è¯´ï¼Œå·²ç»ä¸ºCI/CDæä¾›äº†é“è·¯åŸºçŸ³ï¼ŒåŠ¿å¿…å°†è¿›ä¸€æ­¥ç¼©çŸ­è¿­ä»£å‘¨æœŸï¼Œæé«˜äº¤ä»˜é€Ÿåº¦ï¼ˆè™½ç„¶è¿˜æ˜¯æœ‰éœ€æ±‚å˜æ›´ï¼Œå¼€å‘å»¶æœŸç­‰è½¯ä»¶å¼€å‘ç®¡ç†ä¸Šä¸å¯é¿å…çš„é—®é¢˜å’Œäººçš„ä¸å¯é æ€§ç­‰å› ç´ ç­‰debuffï¼‰

æ•ˆç‡æé«˜äº†ï¼Œäº¤ä»˜é€Ÿåº¦æé«˜äº†ï¼Œè¿­ä»£é€Ÿåº¦æ›´å¿«äº†ï¼Œå•çº¯çš„æ‰‹å·¥æµ‹è¯•å·²ç»è·Ÿä¸ä¸ŠDevOpsçš„è½¯ä»¶å¼€å‘æ¨¡å¼äº†ï¼ˆå…¶å®åœ¨å¾ˆå¤šå¹´å‰å°±è·Ÿä¸ä¸Šç°ä»£è½¯ä»¶å¼€å‘èŠ‚å¥äº†ï¼‰ï¼Œå¯¹æµ‹è¯•çš„è¦æ±‚æ›´é«˜äº†ï¼Œåº”å½“æ€è€ƒä¸‹çœä¸‹æ¥çš„æ—¶é—´å¦‚ä½•æ›´å¥½çš„åˆ©ç”¨ï¼Œå¦‚ä½•è·Ÿä¸Šç ”å‘ææµ‹çš„é€Ÿåº¦ã€‚å¯¹äºæˆ‘ç°åœ¨æ‰€åœ¨çš„è¿™ç§ç›¸å¯¹ä¼ ç»Ÿçš„è¡Œä¸šè½¯ä»¶æœåŠ¡ä¼ä¸šæ¥è¯´ï¼Œæµ‹è¯•å›¢é˜Ÿå¿…é¡»å°½å¿«é€‚åº”è¿™ç§DevOpså¼€å‘æ¨¡å¼äº†ï¼Œä¸ç„¶å°±ä¼šè¢«å†å²çš„è½¦è½®ç¢¾æ­»åœ¨å°˜åŸƒé‡Œã€‚

æµ‹è¯•å›¢é˜Ÿçš„æ ¸å¿ƒèŒè´£æ˜¯è´¨é‡ä¿éšœï¼Œå›´ç»•è´¨é‡ä¿éšœï¼Œæˆ‘ä»¬å¯ä»¥å°†æµ‹è¯•èƒ½åŠ›å‘å‰å‘åè¾“å‡ºï¼Œè¾“å‡ºçš„æœ€å¥½å½¢å¼å°±æ˜¯è‡ªåŠ¨åŒ–ã€‚

- è‡ªåŠ¨åŒ–æµ‹è¯•ç¯å¢ƒèµ„æºä¸å†æ˜¯è‡ªåŠ¨åŒ–å®æ–½çš„ç»Šè„šçŸ³ï¼Œæ¥ä¸‹æ¥éœ€è¦è€ƒéªŒçš„æ˜¯æˆ‘ä»¬çš„è‡ªåŠ¨åŒ–æ¡†æ¶ã€è‡ªåŠ¨åŒ–å·¥å…·æ˜¯å¦çœŸçš„å¯é ã€å¯ç”¨ã€‚
- æµ‹è¯•é©±åŠ¨å¼€å‘çš„æ¨¡å¼è™½ç„¶å¾ˆå¥½ï¼Œä½†æ˜¯æ¨å¹¿è½åœ°å´ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“çš„ğŸ˜Šã€‚**æµ‹è¯•å›¢é˜Ÿè¿˜å¯ä»¥å°†æµ‹è¯•ç”¨ä¾‹å°è£…ä¸ºè‡ªåŠ¨åŒ–æµ‹è¯•æœåŠ¡ï¼Œæä¾›ç»™ç ”å‘è‡ªæµ‹**ï¼Œè€Œä¸æ˜¯ç­‰ç ”å‘ä¸€æ¬¡æ¬¡å¿«é€Ÿææµ‹å†è¢«æ‰“å›ï¼Œå†²å‡»æ¶ˆè€—æµ‹è¯•å·¥ç¨‹å¸ˆçš„æ¿€æƒ…å’Œç²¾åŠ›ã€‚æ›´è¿‘ä¸€æ­¥å¯ä»¥è€ƒè™‘é€šè¿‡**æ„ŸçŸ¥é•œåƒä»“åº“ä¸­é•œåƒçš„å˜åŒ–ï¼ŒåŠ¨æ€è§¦å‘è‡ªåŠ¨åŒ–æµ‹è¯•**ã€‚å½“ç„¶é•¿è¿œçœ‹æ¥è¿˜æ˜¯è¦ä¸å¼€å‘å›¢é˜Ÿå…±åŒå®ç°CI/CDï¼Œéœ€è¦å„ä¸ªç ”å‘éƒ¨é—¨é€šåŠ›åˆä½œã€‚
- è½¯ä»¶è¿è¡Œç¯å¢ƒçš„é«˜åº¦ä¸€è‡´æ€§ï¼Œç†è®ºä¸Šçº¿ä¸Šå‘ç°çš„ç¼ºé™·å¯ä»¥ç­‰ä»·äºæµ‹è¯•å›¢é˜Ÿæ¼æµ‹ï¼Œè¿™å¯¹æµ‹è¯•å›¢é˜Ÿçš„å¯ä¿¡åº¦å’Œå£ç¢‘æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ï¼Œéœ€è¦è¿›ä¸€æ­¥æé«˜æµ‹è¯•è´¨é‡å’Œæ ‡å‡†
- ä¸Šçº¿åçš„è½¯ä»¶è¿è¡ŒçŠ¶æ€æ£€æµ‹ï¼Œè™½ç„¶æŒ‰ç…§ä¼ ç»Ÿåˆ†å·¥åº”å½“æ˜¯è¿ç»´å›¢é˜Ÿæ¥åšçš„ï¼Œä½†æ˜¯æµ‹è¯•å›¢é˜Ÿåœ¨è¿™æ–¹é¢ä¹Ÿæœ‰è‡ªå·±å¾—å¤©ç‹¬åšçš„ä¼˜åŠ¿ï¼Œå¯¹äº§å“çš„æ·±åˆ»ç†è§£ï¼Œæµ‹è¯•è§’åº¦ï¼Œå¯ä»¥å°†å†…æµ‹æµ‹è¯•ç”¨ä¾‹è°ƒæ•´è½¬ä¸ºé€‚é…çº¿ä¸Šæ•°æ®ç¯å¢ƒçš„åœ¨çº¿è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ï¼Œå®ç°çº¿ä¸Šæµ‹è¯•ï¼Œåœ¨ç¬¬ä¸€æ—¶é—´å‘ç°ç”±äºçº¿ä¸Šç¯å¢ƒæµ‹è¯•æ•°æ®çš„å¤šæ ·æ€§å’Œé‡çº§å¸¦æ¥çš„é—®é¢˜ï¼ŒåŠæ—¶æ”¶é›†è§¦å‘çº¿ä¸Šè‡ªåŠ¨åŒ–ç”¨ä¾‹å¤±è´¥çš„æµ‹è¯•æ•°æ®æ¥å®Œå–„æµ‹è¯•ç”¨ä¾‹åº“ï¼Œæé«˜æµ‹è¯•è¦†ç›–åº¦ã€‚

æ€»è€Œè¨€ä¹‹ï¼Œæ ¸å¿ƒå°±æ˜¯**è¿›ä¸€æ­¥æé«˜è‡ªåŠ¨åŒ–æµ‹è¯•æŠ€æœ¯çš„æ·±åº¦å’Œå¹¿åº¦**ã€‚



æš‚æ—¶æƒ³åˆ°è¿™äº›ï¼Œæœ‰æ–°çš„æƒ³æ³•å†è¡¥å……ã€‚



> Reference  
> https://www.infoq.cn/article/docker-lead-test-innovation

----

2019å¹´03æœˆ01æ—¥ äº è¥¿å®‰  
[Email](toddlerya@qq.com)  
[GitHub](https://github.com/toddlerya)	



